import{_,j as b,a as i,c as d,b as e,l as u,S as v,M as y,F as p,C as h,n as f,G as x,H as T,v as m,p as w,I as $,J as M}from"./index-604eeb5f.js";const S={},V={class:"modal fade",id:"newTicket",tabindex:"-1","aria-hidden":"true"},C={class:"modal-dialog"},D={class:"modal-content"},I=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"New Ticket"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body",style:{"text-align":"left"}},N={class:"modal-footer"};function B(s,t){const o=b("FormKit");return i(),d("div",V,[e("div",C,[e("div",D,[I,e("div",F,[u(o,{class:"less-padding",type:"text",label:"Title",modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=a=>s.title=a)},null,8,["modelValue"]),u(o,{style:{"min-height":"150px"},type:"textarea",label:"Your message",rows:"20",modelValue:s.message,"onUpdate:modelValue":t[1]||(t[1]=a=>s.message=a)},null,8,["modelValue"])]),e("div",N,[e("button",{onClick:t[2]||(t[2]=a=>s.createTicket()),class:"btn btn-golden text-dark"},"Add new ticket")])])])])}const K=_(S,[["render",B]]),L="/assets/send-91522be2.svg";const H={components:{Sidebar:v,TicketModal:K},data(){return{tickets:[],messages:[],rplyTxt:"",title:"",message:"",newTicket:{},selectedTicket:""}},mounted(){this.getTicketList()},methods:{sendMsg(){const s="https://allbet247livegames.com/backend/web/ticket/default/reply?id="+this.selectedTicket;let t=this;this.$axios.post(s,{message:t.rplyTxt}).then(function(o){console.log(t.messages);const a=new Date,l=a.getHours()+":"+a.getMinutes();t.messages.push({id:"",message:t.rplyTxt,cdate:l}),t.rplyTxt=""})},convertDate(s){const t=new Date(s);let o=t.getFullYear(),a=t.getMonth();a=("0"+(a+1)).slice(-2);let l=t.getDate();l=("0"+l).slice(-2);let c=t.getHours();c=("0"+c).slice(-2);let r=t.getMinutes();r=("0"+r).slice(-2);let n=t.getSeconds();return n=("0"+n).slice(-2),`${o}/${a}/${l} ${c}:${r}:${n}`},getTicketList(){const s="https://allbet247livegames.com/backend/web/ticket/default/list";let t=this;this.$axios.get(s).then(function(o){let a=o.data.params;a.length>0&&(t.tickets=a)})},getTicket(s){this.selectedTicket=s;const t="https://allbet247livegames.com/backend/web/ticket/default/get";let o=this;this.$axios.get(t,{params:{id:s}}).then(function(a){let l=a.data.params;console.log(l),o.messages=l.messages,o.newTicket=l})},createTicket(){const s="https://allbet247livegames.com/backend/web/ticket/default/new";let t=this;this.$axios.post(s,{title:t.title,message:t.message}).then(function(o){if(o.data.result){var l=document.getElementById("newTicket"),c=y.getInstance(l);c.hide(),t.getTicketList()}})}}},g=s=>($("data-v-f86e643e"),s=s(),M(),s),U=g(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("button",{class:"btn btn-golden text-dark mt-3","data-bs-toggle":"modal","data-bs-target":"#newTicket"}," New ticket ")])],-1)),j={class:"row mt-3"},E={class:"col-md-6"},Y=g(()=>e("div",{class:"sticky-header bg-dark-gradient text-center p-1 simple-page"},[e("h4",{class:"mt-3 mb-3"},"Ticket list")],-1)),z={class:"bg-dark-gradient text-center p-4 simple-page overflow-box position-relative mb-3",style:{height:"350px","overflow-y":"scroll"}},A={key:0,class:"table table-responsive"},G=g(()=>e("thead",null,[e("tr",null,[e("th",null,"Title"),e("th",null,"Date"),e("th",null,"Status")])],-1)),J=["onClick"],O={class:"text-golden"},W={key:1,class:"vertical-center notif-text"},q={class:"col-md-6"},P=g(()=>e("div",{class:"sticky-header bg-dark-gradient text-center p-1 simple-page"},[e("h4",{class:"mt-3 mb-3"},"Messages")],-1)),Q={class:"bg-dark-gradient p-4 simple-page overflow-box position-relative msgs-wrapper"},R={key:0},X={key:1,class:"vertical-center notif-text"},Z={class:"input-group",style:{height:"50px"}},ee=["disabled"],te={class:"input-group-append"},se=["disabled"],le=g(()=>e("img",{src:L},null,-1)),ae=[le];function ne(s,t,o,a,l,c){const r=b("TicketModal");return i(),d("div",null,[U,e("div",j,[e("div",E,[Y,e("div",z,[l.tickets.length>0?(i(),d("table",A,[G,e("tbody",null,[(i(!0),d(p,null,h(l.tickets,n=>(i(),d("tr",{onClick:k=>c.getTicket(n._id)},[e("td",O,m(n.title),1),e("td",null,m(this.convertDate(Number(n.udate))),1),e("td",null,[e("strong",{class:w([{"text-grass":n.status=="open"},{"text-red":n.status=="closed"},{"text-golden-light":n.status=="user_pending"}])},m(n.status),3)])],8,J))),256))])])):(i(),d("p",W," There is no ticket yet "))])]),e("div",q,[P,e("div",Q,[l.messages.length>0?(i(),d("div",R,[(i(!0),d(p,null,h(l.messages,n=>(i(),d("p",null,m(n.message),1))),256))])):(i(),d("p",X," Select a ticket to start messaging "))]),e("div",Z,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>l.rplyTxt=n),disabled:l.messages.length==0?"disabled":!1,onKeyup:t[1]||(t[1]=T(n=>c.sendMsg(),["enter"])),type:"text",class:"form-control msg-input",id:"input-msg",placeholder:"Write here...","aria-describedby":"basic-addon2"},null,40,ee),[[x,l.rplyTxt]]),e("div",te,[e("button",{onClick:t[2]||(t[2]=n=>c.sendMsg()),disabled:l.messages.length==0?"disabled":!1,class:"btn btn-outline-secondary msg-input",id:"send-msg",type:"button",style:{height:"50px"}},ae,8,se)])])])]),u(r)])}const ie=_(H,[["render",ne],["__scopeId","data-v-f86e643e"]]);export{ie as default};
