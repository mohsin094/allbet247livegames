import{_ as b,o,c as l,a as t,t as a,j as r,n as p,b as i,F as h,r as m}from"./index-13d66610.js";const g={data(){return{user:void 0,userId:"",baseUrl:"https://allbet247livegames.com",transactions:void 0,agentTransactions:void 0}},mounted(){this.userId=this.$route.query.userId,this.fetchUser(),this.fetchTransactions(),this.fetchAgentTransactions(),$(".custom-date-picker").datepicker()},methods:{fetchTransactionsByDate(n){const c=$("#date-from-trans").val(),d=$("#date-to-trans").val();c!=""&&d!=""?this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/list?query="+this.userId+"&date="+c+"&toDate="+d).then(u=>{u=u.data,u.result&&(this.transactions=u.params,setTimeout(()=>{$(".custom-date-picker").datepicker()},100))}):this.fetchTransactions()},fetchTransactions(){this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/list?query="+this.userId).then(n=>{n=n.data,n.result&&(this.transactions=n.params,setTimeout(()=>{$(".custom-date-picker").datepicker()},100))})},fetchAgentTransactions(){this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/get-agent-transactions?agentId="+this.userId).then(n=>{n=n.data,n.result&&(this.agentTransactions=n.params,setTimeout(()=>{$(".custom-date-picker").datepicker()},100))})},fetchAgentTransactionsByDate(){const n=$("#date-from-revenue").val(),c=$("#date-to-revenue").val();n!=""&&c!=""?this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/get-agent-transactions-by-date?agentId="+this.userId+"&date="+n+"&toDate="+c).then(d=>{d=d.data,d.result&&(this.agentTransactions.daily=d.params)}):this.fetchAgentTransactions()},fetchUser(){this.$axios.get("https://allbet247livegames.com/backend/web/user/admin/get?userId="+this.userId).then(n=>{n=n.data,n.result&&(this.user=n.params)})},getStatusClass(n){let c="";switch(n){case"active":c="success";break;case"waiting_confirmation":c="warning";break;case"block":c="danger";break}return"bg-label-"+c}}},v=t("h4",null,"User Profile",-1),f={class:"row"},y={class:"col-xl-4 col-lg-5 col-md-5 order-1 order-md-0"},k={key:0,class:"card mb-4"},T={class:"card-body"},D={class:"user-avatar-section"},w={class:"d-flex align-items-center flex-column"},x=["src"],I={class:"user-info text-center"},Y={class:"mb-2"},A={class:"badge bg-label-secondary mt-1"},M=t("p",{class:"mt-4 small text-uppercase text-muted"},"Details",-1),R={class:"info-container"},B={class:"list-unstyled"},S={class:"mb-2"},U=t("span",{class:"fw-medium me-1"},"Public Name:",-1),C={class:"mb-2 pt-1"},N=t("span",{class:"fw-medium me-1"},"Email:",-1),q={class:"mb-2 pt-1"},L=t("span",{class:"fw-medium me-1"},"Status:",-1),P={class:"mb-2 pt-1"},V=t("span",{class:"fw-medium me-1"},"Role:",-1),E={class:"mb-2 pt-1"},F=t("span",{class:"fw-medium me-1"},"Balance:",-1),j={class:"mb-2 pt-1"},z=t("span",{class:"fw-medium me-1"},"Level:",-1),W={key:0,class:"mb-2 pt-1"},G=t("span",{class:"fw-medium me-1"},"Agent:",-1),H={class:"col-xl-8 col-lg-7 col-md-7 order-0 order-md-1"},J={key:0,class:"card mb-4"},K=t("h5",{class:"card-header"},"Daily Revenue Share",-1),O={class:"col-md-6 col-12 mb-4"},Q=t("label",{class:"form-label"},"Date Range",-1),X={class:"input-group input-daterange"},Z=t("input",{class:"form-control custom-date-picker",id:"date-from-revenue",placeholder:"MM/DD/YYYY",type:"text"},null,-1),tt=t("span",{class:"input-group-text"},"to",-1),et=t("input",{id:"date-to-revenue",class:"form-control custom-date-picker",placeholder:"MM/DD/YYYY",type:"text"},null,-1),st={class:"table-responsive text-nowrap"},at={class:"table"},nt=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Amount"),t("th",null,"Match ID")])],-1),ot={class:"table-border-bottom-0"},lt={class:"table"},ct={class:"table-border-bottom-0"},rt={class:"bg-success"},it=t("td",null,"Total Revenue Share",-1),dt={key:1,class:"card mb-4"},ut=t("h5",{class:"card-header"},"Weekly Revenue Share",-1),_t={class:"table-responsive text-nowrap"},ht={class:"table"},mt=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Amount"),t("th",null,"Match ID")])],-1),bt={class:"table-border-bottom-0"},pt={class:"table"},gt={class:"table-border-bottom-0"},vt={class:"bg-success"},ft=t("td",null,"Total Revenue Share",-1),yt={key:2,class:"card mb-4"},kt=t("h5",{class:"card-header"},"Monthly Revenue Share",-1),Tt={class:"table-responsive text-nowrap"},Dt={class:"table"},wt=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Amount"),t("th",null,"Match ID")])],-1),xt={class:"table-border-bottom-0"},It={class:"table"},Yt={class:"table-border-bottom-0"},At={class:"bg-success"},Mt=t("td",null,"Total Revenue Share",-1),Rt={key:3,class:"card mb-4"},Bt=t("h5",{class:"card-header"},"Last 50 Transactions",-1),St={class:"col-md-6 col-12 mb-4"},Ut=t("label",{class:"form-label"},"Date Range",-1),Ct={class:"input-group input-daterange"},Nt=t("input",{class:"form-control custom-date-picker",id:"date-from-trans",placeholder:"MM/DD/YYYY",type:"text"},null,-1),qt=t("span",{class:"input-group-text"},"to",-1),Lt=t("input",{id:"date-to-trans",class:"form-control custom-date-picker",placeholder:"MM/DD/YYYY",type:"text"},null,-1),Pt={class:"table-responsive text-nowrap"},Vt={class:"table"},Et=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"User"),t("th",null,"Amount"),t("th",null,"Type"),t("th",null,"Desc."),t("th",null,"Match ID")])],-1),Ft={class:"table-border-bottom-0"},jt={key:0},zt={class:"avatar avatar-md me-2"},Wt=["src"],Gt={class:"fw-medium"},Ht={key:0,class:"avatar avatar-md me-2"},Jt=["src"],Kt={key:1,class:"fw-medium"};function Ot(n,c,d,u,e,_){return o(),l(h,null,[v,t("div",f,[t("div",y,[e.user!=null?(o(),l("div",k,[t("div",T,[t("div",D,[t("div",w,[t("img",{alt:"User avatar",class:"img-fluid rounded mb-3 pt-1 mt-4",height:"100",src:e.baseUrl+"/assets/images/avatars/"+e.user.avatar+".png",width:"100"},null,8,x),t("div",I,[t("h4",Y,a(e.user.public_name),1),t("span",A,a(e.user.role),1)])])]),M,t("div",R,[t("ul",B,[t("li",S,[U,r(),t("span",null,a(e.user.public_name),1)]),t("li",C,[N,r(),t("span",null,a(e.user.email),1)]),t("li",q,[L,r(),t("span",{class:p(["badge",_.getStatusClass(e.user.status)])},a(e.user.status),3)]),t("li",P,[V,r(),t("span",null,a(e.user.role),1)]),t("li",E,[F,r(),t("span",null,a(e.user.balance),1)]),t("li",j,[z,r(),t("span",null,a(e.user.lvl),1)]),e.user.agent!=null?(o(),l("li",W,[G,r(),t("span",null,a(e.user.agent.public_name),1)])):i("",!0)])])])])):i("",!0)]),t("div",H,[e.user!=null&&(e.user.role=="agent"||e.user.role=="admin")&&e.agentTransactions!=null?(o(),l("div",J,[K,t("div",O,[Q,t("div",X,[Z,r(),tt,r(),et,t("button",{class:"btn btn-outline-primary waves-effect",onClick:c[0]||(c[0]=(...s)=>_.fetchAgentTransactionsByDate&&_.fetchAgentTransactionsByDate(...s)),type:"button",id:"button-addon2"},"Apply")])]),t("div",st,[t("table",at,[nt,t("tbody",ot,[(o(!0),l(h,null,m(e.agentTransactions.daily.transactions,s=>(o(),l("tr",null,[t("td",null,a(s._id),1),t("td",null,a(s.amount),1),t("td",null,a(s.source=="game-engine-match-end"?s.source_id:""),1)]))),256))])]),t("table",lt,[t("tbody",ct,[t("tr",rt,[it,t("td",null,a(e.agentTransactions.daily.totalRevenue),1)])])])])])):i("",!0),e.user!=null&&(e.user.role=="agent"||e.user.role=="admin")&&e.agentTransactions!=null?(o(),l("div",dt,[ut,t("div",_t,[t("table",ht,[mt,t("tbody",bt,[(o(!0),l(h,null,m(e.agentTransactions.weekly.transactions,s=>(o(),l("tr",null,[t("td",null,a(s._id),1),t("td",null,a(s.amount),1),t("td",null,a(s.source=="game-engine-match-end"?s.source_id:""),1)]))),256))])]),t("table",pt,[t("tbody",gt,[t("tr",vt,[ft,t("td",null,a(e.agentTransactions.weekly.totalRevenue),1)])])])])])):i("",!0),e.user!=null&&(e.user.role=="agent"||e.user.role=="admin")&&e.agentTransactions!=null?(o(),l("div",yt,[kt,t("div",Tt,[t("table",Dt,[wt,t("tbody",xt,[(o(!0),l(h,null,m(e.agentTransactions.monthly.transactions,s=>(o(),l("tr",null,[t("td",null,a(s._id),1),t("td",null,a(s.amount),1),t("td",null,a(s.source=="game-engine-match-end"?s.source_id:""),1)]))),256))])]),t("table",It,[t("tbody",Yt,[t("tr",At,[Mt,t("td",null,a(e.agentTransactions.monthly.totalRevenue),1)])])])])])):i("",!0),e.user!=null&&e.user.role!="agent"?(o(),l("div",Rt,[Bt,t("div",St,[Ut,t("div",Ct,[Nt,r(),qt,r(),Lt,t("button",{class:"btn btn-outline-primary waves-effect",onClick:c[1]||(c[1]=(...s)=>_.fetchTransactionsByDate&&_.fetchTransactionsByDate(...s)),type:"button",id:"button-addon2"},"Apply")])]),t("div",Pt,[t("table",Vt,[Et,t("tbody",Ft,[(o(!0),l(h,null,m(e.transactions,s=>(o(),l("tr",null,[t("td",null,a(s._id.$oid),1),s.user!=null||s.user!=null?(o(),l("td",jt,[t("div",zt,[t("img",{src:e.baseUrl+"/assets/images/avatars/"+s.user.avatar+".png",alt:"Avatar",class:"rounded-circle"},null,8,Wt)]),t("span",Gt,a(s.user.public_name),1)])):i("",!0),t("td",null,a(s.amount),1),t("td",null,a(s.type),1),t("td",null,[r(a(s.description)+" ",1),s.operator!=null?(o(),l("div",Ht,[t("img",{src:e.baseUrl+"/assets/images/avatars/"+s.operator.avatar+".png",alt:"Avatar",class:"rounded-circle"},null,8,Jt)])):i("",!0),s.operator!=null?(o(),l("span",Kt,a(s.operator.public_name),1)):i("",!0)]),t("td",null,a(s.source=="backend\\modules\\game\\models\\MatchesRepo"?s.source_id:""),1)]))),256))])])])])):i("",!0)])])],64)}const Xt=b(g,[["render",Ot]]);export{Xt as default};
