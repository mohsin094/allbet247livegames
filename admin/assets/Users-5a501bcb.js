import{_ as v,o as i,c as n,a as t,w as u,v as m,d as f,F as h,r as p,t as c,e as _,f as x,b as g,g as b,h as C,n as W,i as U,j as y}from"./index-489d631c.js";const L={props:{user:{default:{}},statusList:{default:{}},roleList:{default:{}}},methods:{closeModal(){new bootstrap.Modal("#editUserModal").hide()},update(){const e={avatar:this.user.avatar,lvl:this.user.lvl,role:this.user.role,public_name:this.user.public_name,balance:this.user.balance,status:this.user.status};this.$axios.post("https://allbet247livegames.com/backend/web/user/admin/update?userId="+this.user._id,e).then(s=>{s=s.data,s.result&&(new bootstrap.Modal("#editUserModal"),this.$notif.show("Updated!","success"),this.closeModal(),this.$emit("updated"))})}}},F={class:"modal",id:"editUserModal",tabindex:"-1","aria-hidden":"true"},V={class:"modal-dialog modal-lg modal-simple modal-edit-user"},D={class:"modal-content p-3 p-md-5"},E={class:"modal-body"},I=t("div",{class:"text-center mb-4"},[t("h3",{class:"mb-2"},"Edit User Information")],-1),S={id:"editUserForm",class:"row g-3",onsubmit:"return false"},N={class:"col-12"},A=t("label",{class:"form-label"},"Public Name",-1),B={class:"col-12"},j=t("label",{class:"form-label"},"LVL",-1),q={class:"col-12"},P=t("label",{class:"form-label"},"Status",-1),K=["value"],O={class:"col-12"},R=t("label",{class:"form-label"},"Role",-1),T=["value"],z={class:"col-12 text-center"},G=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal","aria-label":"Close"}," close ",-1);function H(e,s,r,w,d,l){return i(),n("div",F,[t("div",V,[t("div",D,[t("div",E,[I,t("form",S,[t("div",N,[A,u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>r.user.public_name=a),type:"text",class:"form-control"},null,512),[[m,r.user.public_name]])]),t("div",B,[j,u(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>r.user.lvl=a),type:"text",class:"form-control"},null,512),[[m,r.user.lvl]])]),t("div",q,[P,u(t("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>r.user.status=a),class:"form-control"},[(i(!0),n(h,null,p(Object.keys(r.statusList),a=>(i(),n("option",{value:a},c(a),9,K))),256))],512),[[f,r.user.status]])]),t("div",O,[R,u(t("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>r.user.role=a),class:"form-control"},[(i(!0),n(h,null,p(Object.keys(r.roleList),a=>(i(),n("option",{value:a},c(a),9,T))),256))],512),[[f,r.user.role]])]),t("div",z,[t("button",{onClick:s[4]||(s[4]=(...a)=>l.update&&l.update(...a)),type:"button",class:"btn btn-primary me-sm-3 me-1"},"Update"),G])])])])])])}const J=v(L,[["render",H]]),Q={props:{user:{default:{}}},data(){return{amount:0}},methods:{closeModal(){new bootstrap.Modal("#depositWithdrawalUserModal").hide()},deposit(){this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/deposit-into-account?userId="+this.user._id+"&amount="+this.amount).then(e=>{e=e.data,e.result&&(new bootstrap.Modal("#depositWithdrawalUserModal"),this.$notif.show("Updated!","success"),this.closeModal(),this.$emit("updated"))})},withdrawal(){this.$axios.get("https://allbet247livegames.com/backend/web/financial/admin/withdrawal-from-account?userId="+this.user._id+"&amount="+this.amount).then(e=>{e=e.data,e.result&&(new bootstrap.Modal("#depositWithdrawalUserModal"),this.$notif.show("Updated!","success"),this.closeModal(),this.$emit("updated"))})}}},X={class:"modal",id:"depositWithdrawalUserModal",tabindex:"-1","aria-hidden":"true"},Y={class:"modal-dialog modal-lg modal-simple modal-edit-user"},Z={class:"modal-content p-3 p-md-5"},tt={class:"modal-body"},st=t("div",{class:"text-center mb-4"},[t("h3",{class:"mb-2"},"Deposit/Withdrawal")],-1),et={id:"editUserForm",class:"row g-3",onsubmit:"return false"},at={class:"col-12"},ot=t("label",{class:"form-label"},"Amount",-1),lt={class:"col-12 text-center"},dt=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal","aria-label":"Close"}," close ",-1);function it(e,s,r,w,d,l){return i(),n("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[st,t("form",et,[t("div",at,[ot,u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>d.amount=a),type:"text",class:"form-control"},null,512),[[m,d.amount]])]),t("div",lt,[t("button",{onClick:s[1]||(s[1]=(...a)=>l.deposit&&l.deposit(...a)),type:"button",class:"btn btn-primary me-sm-3 me-1"},"Deposit"),t("button",{onClick:s[2]||(s[2]=(...a)=>l.withdrawal&&l.withdrawal(...a)),type:"button",class:"btn btn-primary me-sm-3 me-1"},"Withdrawal"),dt])])])])])])}const nt=v(Q,[["render",it]]),rt={components:{EditModal:J,DepositWithdrawalModal:nt},data(){return{users:[],search:"",baseUrl:"https://allbet247livegames.com",roleList:[],statusList:[],userForEdit:{},userForDepositWithdrawal:{}}},mounted(){this.fetchUsers(),this.fetchInitials()},methods:{depositWithdrawal(e){new bootstrap.Modal("#depositWithdrawalUserModal").show(),this.userForDepositWithdrawal=e},editUser(e){new bootstrap.Modal("#editUserModal").show(),this.userForEdit=e},fetchInitials(){this.$axios.get("https://allbet247livegames.com/backend/web/user/admin/get-roles-list").then(e=>{e=e.data,e.result&&(this.roleList=e.params)}),this.$axios.get("https://allbet247livegames.com/backend/web/user/admin/get-status-list").then(e=>{e=e.data,e.result&&(this.statusList=e.params)})},getStatusClass(e){let s="";switch(e){case"active":s="success";break;case"waiting_confirmation":s="warning";break;case"block":s="danger";break}return s},fetchUsers(){let e="";this.search!=""&&(e="?query="+this.search),this.$axios.get("https://allbet247livegames.com/backend/web/user/admin/list"+e).then(s=>{s=s.data,s.result&&(this.users=s.params)})}}},ct=t("h4",null,"Users",-1),ut={class:"card"},mt={key:0,class:"card-header header-elements"},ht={class:"card-header-elements ms-auto"},_t={class:"table-responsive text-nowrap"},bt={class:"table"},pt=t("thead",null,[t("tr",null,[t("th",null,"Public Name"),t("th",null,"Email"),t("th",null,"Balance"),t("th",null,"Role"),t("th",null,"Status"),t("th",null,"Actions")])],-1),vt={class:"table-border-bottom-0"},wt={key:0},ft={class:"avatar avatar-md me-2"},gt=["src"],Ut={class:"fw-medium"},yt={key:1},kt={class:"avatar avatar-md me-2"},$t=["src"],Mt={class:"fw-medium"},xt={class:"dropdown"},Ct=t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"ti ti-dots-vertical"})],-1),Wt={class:"dropdown-menu"},Lt=["onClick"],Ft=t("i",{class:"ti ti-pencil me-1"},null,-1),Vt=["onClick"],Dt=t("i",{class:"ti ti-pencil me-1"},null,-1);function Et(e,s,r,w,d,l){const a=_("router-link"),k=_("edit-modal"),$=_("deposit-withdrawal-modal");return i(),n(h,null,[ct,t("div",ut,[e.$user.data.role=="admin"?(i(),n("div",mt,[t("div",ht,[u(t("input",{onKeyup:s[0]||(s[0]=x((...o)=>l.fetchUsers&&l.fetchUsers(...o),["enter"])),onFocusout:s[1]||(s[1]=(...o)=>l.fetchUsers&&l.fetchUsers(...o)),"onUpdate:modelValue":s[2]||(s[2]=o=>d.search=o),type:"text",class:"form-control form-control-sm",placeholder:"Search"},null,544),[[m,d.search]])])])):g("",!0),t("div",_t,[t("table",bt,[pt,t("tbody",vt,[(i(!0),n(h,null,p(d.users,o=>(i(),n("tr",null,[e.$user.data.role=="admin"?(i(),n("td",wt,[b(a,{to:{name:"userProfile",query:{userId:o._id}}},{default:C(()=>[t("div",ft,[t("img",{src:d.baseUrl+"/assets/images/avatars/"+o.avatar+".png",alt:"Avatar",class:"rounded-circle"},null,8,gt)]),t("span",Ut,c(o.public_name),1)]),_:2},1032,["to"])])):(i(),n("td",yt,[t("div",kt,[t("img",{src:d.baseUrl+"/assets/images/avatars/"+o.avatar+".png",alt:"Avatar",class:"rounded-circle"},null,8,$t)]),t("span",Mt,c(o.public_name),1)])),t("td",null,c(o.email),1),t("td",null,c(o.balance),1),t("td",null,c(o.role),1),t("td",null,[t("span",{class:W(["bg-label-"+l.getStatusClass(o.status),"badge me-1"])},c(o.status),3)]),t("td",null,[t("div",xt,[Ct,t("div",Wt,[e.$user.data.role=="admin"?(i(),n("a",{key:0,onClick:U(M=>l.editUser(o),["prevent"]),class:"dropdown-item"},[Ft,y(" Edit")],8,Lt)):g("",!0),t("a",{onClick:U(M=>l.depositWithdrawal(o),["prevent"]),class:"dropdown-item"},[Dt,y(" Deposit/Withdrawal")],8,Vt)])])])]))),256))])])])]),b(k,{onUpdated:s[3]||(s[3]=o=>l.fetchUsers()),user:d.userForEdit,"status-list":d.statusList,"role-list":d.roleList},null,8,["user","status-list","role-list"]),b($,{onUpdated:s[4]||(s[4]=o=>l.fetchUsers()),user:d.userForDepositWithdrawal},null,8,["user"])],64)}const St=v(rt,[["render",Et]]);export{St as default};
