import{_ as p,o as i,c as r,a as t,w as u,v as m,b as _,F as h,r as b,t as c,d as v,e as g,f as U,n as w,g as k,h as x}from"./index-f5519bef.js";const y={props:{user:{default:{}},statusList:{default:{}},roleList:{default:{}}},methods:{closeModal(){new bootstrap.Modal("#editUserModal").hide()},update(){const e={avatar:this.user.avatar,lvl:this.user.lvl,role:this.user.role,public_name:this.user.public_name,balance:this.user.balance,status:this.user.status};this.$axios.post("http://backgammon.all-bet-247.com/backend/web/user/admin/update?userId="+this.user._id,e).then(s=>{s=s.data,s.result&&(new bootstrap.Modal("#editUserModal"),this.$notif.show("Updated!","success"),this.closeModal(),this.$emit("updated"))})}}},L={class:"modal",id:"editUserModal",tabindex:"-1","aria-hidden":"true"},M={class:"modal-dialog modal-lg modal-simple modal-edit-user"},V={class:"modal-content p-3 p-md-5"},C={class:"modal-body"},E=t("div",{class:"text-center mb-4"},[t("h3",{class:"mb-2"},"Edit User Information")],-1),F={id:"editUserForm",class:"row g-3",onsubmit:"return false"},S={class:"col-12"},$=t("label",{class:"form-label"},"Public Name",-1),B={class:"col-12"},N=t("label",{class:"form-label"},"Balance",-1),I={class:"col-12"},j=t("label",{class:"form-label"},"LVL",-1),q={class:"col-12"},A=t("label",{class:"form-label"},"Status",-1),D=["value"],K={class:"col-12"},O=t("label",{class:"form-label"},"Role",-1),P=["value"],R={class:"col-12 text-center"},T=t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal","aria-label":"Close"}," close ",-1);function z(e,s,o,f,d,n){return i(),r("div",L,[t("div",M,[t("div",V,[t("div",C,[E,t("form",F,[t("div",S,[$,u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.user.public_name=l),type:"text",class:"form-control"},null,512),[[m,o.user.public_name]])]),t("div",B,[N,u(t("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>o.user.balance=l),type:"text",class:"form-control"},null,512),[[m,o.user.balance]])]),t("div",I,[j,u(t("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>o.user.lvl=l),type:"text",class:"form-control"},null,512),[[m,o.user.lvl]])]),t("div",q,[A,u(t("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>o.user.status=l),class:"form-control"},[(i(!0),r(h,null,b(Object.keys(o.statusList),l=>(i(),r("option",{value:l},c(l),9,D))),256))],512),[[_,o.user.status]])]),t("div",K,[O,u(t("select",{"onUpdate:modelValue":s[4]||(s[4]=l=>o.user.role=l),class:"form-control"},[(i(!0),r(h,null,b(Object.keys(o.roleList),l=>(i(),r("option",{value:l},c(l),9,P))),256))],512),[[_,o.user.role]])]),t("div",R,[t("button",{onClick:s[5]||(s[5]=(...l)=>n.update&&n.update(...l)),type:"button",class:"btn btn-primary me-sm-3 me-1"},"Update"),T])])])])])])}const G=p(y,[["render",z]]),H={components:{EditModal:G},data(){return{users:[],search:"",baseUrl:"http://backgammon.all-bet-247.com",roleList:[],statusList:[],userForEdit:{}}},mounted(){this.fetchUsers(),this.fetchInitials()},methods:{editUser(e){new bootstrap.Modal("#editUserModal").show(),this.userForEdit=e},fetchInitials(){this.$axios.get("http://backgammon.all-bet-247.com/backend/web/user/admin/get-roles-list").then(e=>{e=e.data,e.result&&(this.roleList=e.params)}),this.$axios.get("http://backgammon.all-bet-247.com/backend/web/user/admin/get-status-list").then(e=>{e=e.data,e.result&&(this.statusList=e.params)})},getStatusClass(e){let s="";switch(e){case"active":s="success";break;case"waiting_confirmation":s="warning";break}return s},fetchUsers(){let e="";this.search!=""&&(e="?query="+this.search),this.$axios.get("http://backgammon.all-bet-247.com/backend/web/user/admin/list"+e).then(s=>{s=s.data,s.result&&(this.users=s.params)})}}},J=t("h4",null,"Users",-1),Q={class:"card"},W={class:"card-header header-elements"},X={class:"card-header-elements ms-auto"},Y={class:"table-responsive text-nowrap"},Z={class:"table"},tt=t("thead",null,[t("tr",null,[t("th",null,"Public Name"),t("th",null,"Email"),t("th",null,"Balance"),t("th",null,"Role"),t("th",null,"Status"),t("th",null,"Actions")])],-1),st={class:"table-border-bottom-0"},et={class:"avatar avatar-md me-2"},lt=["src"],at={class:"fw-medium"},ot={class:"dropdown"},nt=t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"ti ti-dots-vertical"})],-1),dt={class:"dropdown-menu"},it=["onClick"],rt=t("i",{class:"ti ti-pencil me-1"},null,-1);function ct(e,s,o,f,d,n){const l=v("edit-modal");return i(),r(h,null,[J,t("div",Q,[t("div",W,[t("div",X,[u(t("input",{onKeyup:s[0]||(s[0]=g((...a)=>n.fetchUsers&&n.fetchUsers(...a),["enter"])),onFocusout:s[1]||(s[1]=(...a)=>n.fetchUsers&&n.fetchUsers(...a)),"onUpdate:modelValue":s[2]||(s[2]=a=>d.search=a),type:"text",class:"form-control form-control-sm",placeholder:"Search"},null,544),[[m,d.search]])])]),t("div",Y,[t("table",Z,[tt,t("tbody",st,[(i(!0),r(h,null,b(d.users,a=>(i(),r("tr",null,[t("td",null,[t("div",et,[t("img",{src:d.baseUrl+"/assets/images/avatars/"+a.avatar+".png",alt:"Avatar",class:"rounded-circle"},null,8,lt)]),t("span",at,c(a.public_name),1)]),t("td",null,c(a.email),1),t("td",null,c(a.balance),1),t("td",null,c(a.role),1),t("td",null,[t("span",{class:w(["bg-label-"+n.getStatusClass(a.status),"badge me-1"])},c(a.status),3)]),t("td",null,[t("div",ot,[nt,t("div",dt,[t("a",{onClick:k(ut=>n.editUser(a),["prevent"]),class:"dropdown-item"},[rt,x(" Edit")],8,it)])])])]))),256))])])])]),U(l,{onUpdated:s[3]||(s[3]=a=>n.fetchUsers()),user:d.userForEdit,"status-list":d.statusList,"role-list":d.roleList},null,8,["user","status-list","role-list"])],64)}const ht=p(H,[["render",ct]]);export{ht as default};
